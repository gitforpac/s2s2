var option='Full Payment';$(document).on('change','input[type=radio][name=paymentoption]',function(){$('.form-loading').show();option=$(this).val();$('.total .p-price').html('');$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.ajax({url:"/paymentg/"+pid,type:'POST',cache:!1,data:{client_count:adventurercount,paymentoption:option},success:function(html){$('.form-loading').hide();$("#book-btn").prop('disabled',!1);$(document).find('.snackbar-container').animate({opacity:0,});$('input[name="total_payment"]').val(html.total);var total=html.total;var tp=html.tp;$('.total .p-price').html('₱'+total.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+'.00<span class="sb-currency">PHP</span>');$('.numag').html(html.per+' PHP x '+adventurercount+' person(s) <i class="fa fa-users"></i>');$('#tp').html('<strong>Total Payment: ₱'+tp.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+'.00<span class="sb-currency">PHP</span></strong>')
$('input[name="guest"]').val(parseInt(adventurercount))}})});$(document).on('change','#adultguest',function(){adventurercount=parseInt($(this).val());$('.form-loading').show();$('.total .p-price').html('');$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.ajax({url:"/paymentg/"+pid,type:'POST',cache:!1,data:{client_count:adventurercount,paymentoption:option},success:function(html){$('.form-loading').hide();$("#book-btn").prop('disabled',!1);$(document).find('.snackbar-container').animate({opacity:0,});$('input[name="total_payment"]').val(html.tp);$('input[name="total_paid"]').val(html.total);var total=html.total;var tp=html.tp;$('.total .p-price').html('₱'+total.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+'.00<span class="sb-currency">PHP</span>');$('.numag').html(html.per+' PHP x '+adventurercount+' person(s) <i class="fa fa-users"></i>');$('#tp').html('<strong>Total Payment: ₱'+tp.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+'.00<span class="sb-currency">PHP</span></strong>')
$('input[name="guest"]').val(parseInt(adventurercount))}})});$('input#cn').focus(function(){$(this).attr('placeholder','0000000000000000')}).blur(function(){$(this).attr('placeholder','Card Number...')});$('input#exp').focus(function(){$(this).attr('placeholder','MM / YY')}).blur(function(){$(this).attr('placeholder','Expiry')});$('input#cvv').focus(function(){$(this).attr('placeholder','3 digits')}).blur(function(){$(this).attr('placeholder','CVV')});$('#cvv').keydown(function(e){var charCode=(e.which)?e.which:e.keyCode
if(charCode>31&&(charCode<48||charCode>57)){e.preventDefault()}
if($(this).val().length==4&&e.keyCode!==8){e.preventDefault()}});$("#exp").on('keyup',function(e){if($(this).val().length==2){if(e.keyCode!==8){e.preventDefault();$(this).val($(this).val()+"/")}}
if($(this).val().length==5&&e.keyCode!==8){e.preventDefault()}});$('form#form-adv-book').ajaxForm({dataType:'json',beforeSubmit:function(){Snackbar.show({showAction:!1,text:'<i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw" style="font-size: 16px;color:#fff !important;"></i> Processing Request...',pos:'bottom-right'});if($('#select_payment_method').val()=='Deposit'){$('.selected-option').empty()}},success:function(data){if(data.success==!1){Snackbar.show({showAction:!1,text:'<i class="fa fa-exclamation-triangle" style="font-size: 16px;color:#fff !important;"></i> There was a problem while booking adventure',pos:'bottom-right',duration:5000});$('.ccerror').show();$('.err2').html(data.error);$('html,body').animate({scrollTop:0},500)}else if(data.success==!0){Snackbar.show({showAction:!1,text:'<i class="fa fa-check-circle" style="font-size: 16px;color:#8bd395 !important;"></i> Booking Created Successfully',pos:'bottom-right'});window.location.href="/myadventures"}else{Snackbar.show({showAction:!1,text:'<i class="fa fa-exclamation-triangle" style="font-size: 16px;color:#fff !important;"></i> There was a problem while booking adventure',pos:'bottom-right',duration:5000});$.alert('There was an internal problem')}}});$(document).on('change','#select_payment_method',function(){var cc='<div class="form-group"><label class="control-label pd-h" for="cn">Card Information</label><img src="http://i76.imgup.net/accepted_c22e0.png" style="float: right;"><input type="text" name="cardnumber" required="" placeholder="Card Number..." class="form-control cvcv" id="cn"></div><div class="form-group row"><div class="col-md-4" style="margin-right:1px;padding-right: 0">	<input type="text" name="exp" placeholder="Expiry" class="form-control cvcv" id="exp"></div><div class="col-md-4" style="margin-left:0;padding-left:0"><input type="text" name="cvv" placeholder="CVV" class="form-control cvcv" id="cvv"></div></div>';if($(this).val()=='Deposit'){$('.selected-option').slideToggle().html('')}else if($(this).val()=='Credit Card'){$('.selected-option').html(cc).slideToggle()}else{alert('error select')}})
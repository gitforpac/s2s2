$('[href="#videos"]').on('shown.bs.tab',function(e){$('.grid').masonry({itemSelector:'.grid-item',columnWidth:0})});$(document).ready(function(){$('#lightgallery').lightGallery({thumbnail:!1,animateThumb:!1,showThumbByDefault:!1,autoplayControls:!1,share:!1,zoom:!1,download:!1,pager:!1,loadVimeoThumbnail:!0,vimeoThumbSize:'thumbnail_medium',})});$('#add_includedbtn').click(function(e){Pace.restart();e.preventDefault();$('#add_includedbtn').prop('disabled',!0);var included=$('#included').val();if(included){$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.ajax({type:"POST",url:'/additem/'+pid,data:{item:included},success:function(response){if(response.success==!0){$('#included').val('');$('#i-content').html(response.content);$('#add_includedbtn').prop('disabled',!1);$.notify(" Updated Successfully","success")}else{$.notify(" Something Went Wrong","error")}},dataType:"json",})}else{$.alert('Please enter an Item')}})
$('table.includeds').on('click','#remove_includedbtn',function(e){e.preventDefault();var item=$(this).data('id');$.confirm({title:'Delete Item',content:'Are you sure you want to delete this Item?',buttons:{confirm:{btnClass:'btn-green',action:function(){var _token=$('meta[name="csrf-token"]').attr('content');$.ajax({type:"POST",url:'/deleteitem/'+item+'/'+pid,data:{_token:_token},success:function(response){if(response.success==!0){$('#i-content').html(response.content);$.notify(" Updated Successfully","success")}else{$.alert({title:'Encountered an error!',content:'There was an error deleting',type:'red',typeAnimated:!0,})}},dataType:"json",})}},cancel:{btnClass:'btn-red'},}})});$('#add_avdbtn').click(function(e){Pace.restart();e.preventDefault();var dateavd=$('#date-avd').val();var mydate=new Date(dateavd);var sqlformat=mydate.getFullYear()+'-'+(mydate.getMonth()+1)+'-'+mydate.getDate();if(dateavd){$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.ajax({type:"POST",url:'/addschedule/'+pid,data:{schedule:sqlformat},success:function(res){if(res.success==!0){$('#date-avd').val('');$('#add_avdbtn').prop('disabled',!1);$('#avd-content').html(res.content);$.notify(" Updated Successfully","success")}else{$.notify(" Something Went Wrong","error")}},dataType:"json",})}else{$.alert('Please enter Date')}});$('table.scheds').on('click','#remove_avdbtn',function(e){var sid=$(this).data('id');e.preventDefault();$.confirm({title:'Delete Date',content:'Are you sure you want to delete this Date?',buttons:{confirm:{btnClass:'btn-green',action:function(){var _token=$('meta[name="csrf-token"]').attr('content');$.ajax({type:"POST",url:'/deleteschedule/'+sid+'/'+pid,data:{_token:_token},success:function(response){if(response.success==!0){$('#avd-content').html(response.content);$.notify(" Updated Successfully","success")}else{$.alert({title:'Encountered an error!',content:'There was an error deleting',type:'red',typeAnimated:!0,})}},dataType:"json",})}},cancel:{btnClass:'btn-red'},}})});$(document).on('click','#deletephotobtn',function(e){e.preventDefault();var vid=$(this).prev().data('id');var sl=$(this).parent();$.confirm({title:'Delete Photo',content:'Are you sure you want to delete this Photo?',buttons:{confirm:{btnClass:'btn-green',action:function(){var _token=$('meta[name="csrf-token"]').attr('content');$.ajax({type:"POST",url:'/deletephoto/'+vid,data:{_token:_token},success:function(response){if(response.success==!0){$.notify(" Updated Successfully","success");sl.remove()}else{$.alert({title:'Encountered an error!',content:'There was an error deleting',type:'red',typeAnimated:!0,})}},dataType:"json",})}},cancel:{btnClass:'btn-red'},}})});$(function(){var bar=$('.bar');var percent=$('.percent');$('#upload-photo').ajaxForm({dataType:'json',beforeSend:function(){Pace.restart();var percentVal='0%';bar.width(percentVal);percent.html(percentVal)},uploadProgress:function(event,position,total,percentComplete){var percentVal=percentComplete+'%';bar.width(percentVal);percent.html(percentVal)},success:function(data){var percentVal='100%';bar.width(percentVal);percent.html(percentVal);$('#photosga').find('div#upds').hide().html(data).fadeIn()},})});$('#add-video-form').ajaxForm({dataType:'json',beforeSubmit:function(){Pace.restart();var link=$('input[name="video_link"]').val()
var validLink=ValidURL(link);if(validLink==!0){return!0}else{$.alert({title:'Invalid Link Format',content:'Pleas enter a valid video link',type:'red',typeAnimated:!0,})
return!1}},success:function(data){$('#videosga').find('div#vupds').hide().html(data).fadeIn()}});function ValidURL(str){var pattern=new RegExp('^(https?:\\/\\/)?'+'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+'((\\d{1,3}\\.){3}\\d{1,3}))'+'(\\:\\d+)?'+'(\\/[-a-z\\d%@_.~+&:]*)*'+'(\\?[;&a-z\\d%@_.,~+&:=-]*)?'+'(\\#[-a-z\\d_]*)?$','i');if(!pattern.test(str)){return!1}else{return!0}}
$(document).on('click','#deletevideobtn',function(e){$('.lightgallery').data('lightGallery').destroy(!1);e.preventDefault();var vid=$(this).data('id');var sl=$(this).parent();$.confirm({title:'Delete Photo',content:'Are you sure you want to delete this Photo?',buttons:{confirm:{btnClass:'btn-green',action:function(){var _token=$('meta[name="csrf-token"]').attr('content');$.ajax({type:"POST",url:'/deletevideo/'+vid,data:{_token:_token},success:function(response){if(response.success==!0){$.notify(" Updated Successfully","success");sl.remove()}else{$.alert({title:'Encountered an error!',content:'There was an error deleting',type:'red',typeAnimated:!0,})}},dataType:"json",})}},cancel:{btnClass:'btn-red'},}})})
$('#basic-details').submit(function(e){e.preventDefault();$("#basic-details").ajaxSubmit({dataType:'json',beforeSubmit:function(){Pace.restart()},success:function(data){if(data.success==!0){$.notify(" Updated Successfully","success")}else{$.notify(" Something Went Wrong Updating","error")}}})});$('#edit-itinerary-form').ajaxForm({success:function(data){if(data.success==!0){$.notify(" Updated Successfully","success")}else{$.notify(" There was an error updating","error")}}});$('#info-form').ajaxForm({beforeSubmit:function(){Pace.restart()},success:function(data){var title=$('input[name="info_title"]').val();var body=$('textarea[name="info_body"]').val();if(data.success==!0){var html='<tr>';html+='<td>'+title+'</td>';html+='<td>'+body+'</td>';html+='<td><a href="javascript:void(0)" data-id="'+data.item_id+'" id="deleteinfobtn" class="btn-sm btn-danger" title="Remove Information">Delete</a></td></tr>'
$('table.info tr:last').after(html);$.notify(" Updated Successfully","success");$('input[name="info_title"]').val('');$('textarea[name="info_body"]').val('')}else{$.notify(" There was an error updating","error")}}});$(document).on('click','#deleteinfobtn',function(e){e.preventDefault();var $row=$(this).closest('tr'),$table=$row.closest('table');var sid=$(this).data('id');e.preventDefault();$.confirm({title:'Delete Info',content:'Are you sure you want to delete this Information?',buttons:{confirm:{btnClass:'btn-green',action:function(){var _token=$('meta[name="csrf-token"]').attr('content');$.ajax({type:"POST",url:'/deletecontent/'+sid,data:{_token:_token},success:function(response){if(response.success==!0){$row.remove();$table.find('tr').each(function(i,v){$(v).find('span.num3').text(i)});$.notify(" Updated Successfully","success")}else{$.alert({title:'Encountered an error!',content:'There was an error deleting',type:'red',typeAnimated:!0,})}},dataType:"json",})}},cancel:{btnClass:'btn-red'},}})})
$('#add_price_forbtn').click(function(e){Pace.restart();e.preventDefault();$('#add_price_forbtn').prop('disabled',!0);var price=$('#price_for').val();var priceisnum=ifnum(price);if(price&&priceisnum===!0){$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')}});$.ajax({type:"POST",url:'/addprice/'+pid,data:{price_for:price},success:function(response){if(response.success==!0){$('#price_for').val('');$('#prices-table').html(response.content);$('#add_price_forbtn').prop('disabled',!1);$.notify(" Updated Successfully","success")}else{$.notify(" Something Went Wrong","error")}},dataType:"json",})}else{$('#add_price_forbtn').prop('disabled',!1);$.alert('Please check your input - Must not be empty or must be a number')}});$('table.prices').on('click','#remove_pricebtn',function(e){e.preventDefault();var id=$(this).data('id');$.confirm({title:'Delete Item',content:'Are you sure you want to delete Price along side subtracting max clients?',buttons:{confirm:{btnClass:'btn-green',action:function(){var _token=$('meta[name="csrf-token"]').attr('content');$.ajax({type:"POST",url:'/removeprice/'+id+'/'+pid,data:{_token:_token},success:function(response){if(response.success==!0){$.notify(" Updated Successfully","success");$('#prices-table').html(response.content)}else{$.alert({title:'Encountered an error!',content:'There was an error deleting',type:'red',typeAnimated:!0,})}},dataType:"json",})}},cancel:{btnClass:'btn-red'},}})});$(document).on('click','#edit_pricebtn',function(){var prid=$(this).data('id');var url='/editprice/'+prid+'/'+pid;$('#edit-price-modal').modal('show');$('input[name="personcount"]').val($(this).data('count'));$('input[name="new_price"]').val($(this).data('price'));$('input[name="price_pos"]').val($(this).data('position'));$('#edit-price-form').attr('action',url);$('#save-price-btn').prop('disabled',!0)});$('input[name="new_price"]').keyup(function(){$('#save-price-btn').prop('disabled',!1)})
$('#edit-price-form').ajaxForm({dataType:'json',beforeSend:function(){Pace.restart();var newprice=$('input[name="new_price"]').val();var priceisnum=ifnum(newprice);if(priceisnum==!1&&newprice!==''||newprice==null){return!1;$.alert('Please check your input - Must not be empty or must be a number')}},success:function(data){$.notify(" Updated Successfully","success");$('#prices-table').html(data)},});function ifnum(x){if(isNaN(x)){return!1}else{return!0}}